### Summary

Today I spent some more time working on the background scene for the main menu, as well as polishing some effects and updating a few models.

The main menu scene is much more detailed now, with more trees and foliage, more phone lines, tire tracks behind the crashed car, some of the new street lamps, flying birds, and more fog. Overall, I think it looks a lot more like a dark, stormy night. The main menu and background scene also fade in now when the game starts up.

The new street lamps are from a new asset pack, which has been added to the credits. They have a nice halo effect around the light, and I used the `LightCurve` node to add an animated flickering effect. The number of raindrops has been roughly doubled for both the rain and thunder effects and the lifetime of the raindrops has been increased, making the effect look thicker.

I've added a message to the message history when you are out of stamina, along with the sound that plays. I replaced the sound for when the player is hurt with one that is much more human, and made the pitch/volume vary a little bit so not every hit sounds exactly the same.

I'm glad that I spent another week polishing the demo and adding a 3D background to the main menu. I think the new meshes, sounds, and scene help reinforce a lot of the atmosphere that I'm trying to bring to the game. I'm debating how many more demo levels I want to make before moving back to the story levels for the main game, but I've been considering another set of three levels.

### Progress

- added support for a 3D background scene to the main menu
	- this will allow me to show a mini-level, like an animated diorama, behind the main menu
- added a new sound when the player is hurt
	- now your character sounds like a person and not a ball of paper being hit with a stick
- added a real mesh for the street lights
	- the light is animated with a slight flicker (and shadows, when shadows are set to high)
	- replaced the street lights on the bus stop level
	- added to the main menu background
- added a black overlay behind the menu that fades out when the game starts
	- makes the transition from the Godot logo to the main scene less jarring
- added an out-of-stamina message to the message history with an appropriate icon
	- this goes along with the player exhausted sound
- added a field for icons to the interactive component of items
	- food and guns will both benefit from individual icons
- added an option to the `LightCurve` node to offset the starting time
	- this allows multiple light groups using the same curves, but playing out of sync
- added the bullet hole decal and fire sprites to the credits list
	- both textures were from OpenGameArt and released under the CC0 license
- added an editor tool that sets a random Y rotation on the selected objects
	- very helpful when building a large forest or placing grass
	- make sure to adjust props so they don't clip with other geometry and look good from every playable angle
- continued building the main menu background
	- adding more trees and foliage
	- adjusting the phone lines and making sure they extend to the horizon
	- added tire tracks behind the car
	- added a few street lamps
	- added some flying birds that look sort of like crows or ravens
	- increased the amount of fog, especially against the sky
	- hide the player characters during the main menu (at least for now)
- increased the amount of raindrops for the weather effects
	- both rain and thunder have had the number of particles roughly doubled
- fixed an error where you could look down and equip the shotgun if it was in your inventory
	- the collision shapes for inventory items were not being disabled correctly
- fixed another source of zombie equipment errors (`Unable to equip weapon: ZombieMelee`)
	- this was continuing to happen because of zombies with 0 equipment slots
	- I see two immediate solutions:
		- check if the slot exists before switching to that weapon
		- warn when an entity loads with 0 slots
- fixed an issue where the mouse sensitivity slider in the options menu was not set back to your previous selection when the menu was opened
- fixed an issue where the CRT shader was not being disabled again when you restarted the game after disabling it in the options menu
- fixed the post-shader checkbox in the pause menu not matching the options menu
	- checking or clearing the checkbox in one menu will now change the other
- renamed the "Post Shader" checkbox in the pause menu to "CRT Shader" to match the options menu
- updated the HUD diagram in the options menu
	- added the message history panel
- updated some of the level loading images to reflect the recent changes
- updated the readme
	- updated the addons and assets sections
	- updated the feature highlights to include ladders, chains, and books
	- added a section about the debug tools (console and visualizations)

### TODOs

- improvements:
	- rename the debug level to sandbox
	- cars need to emit sounds more often (for the attention system)
		- this is really optional (nice to have)
		- the engine noise for cars and other looping sounds only emit a sound event when they start or restart, but not while they are playing
		- this means they do not draw as much attention from zombies and other enemies as they maybe should
		- there are three possible solutions:
			- have sound nodes emit a sound on an interval while playing
			- add a separate node that emits a sound while the sound node is playing (seems wrong)
			- add a duration parameter to sounds so that they continue to exist and check for new collisions (also seems a bit odd)
- bugs:
	- fix leaking relationships (`More than one entity wielding...`)
		- I haven't seen this since fixing the zombie equipment errors, but I'm still monitoring for it
	- error when changing levels (`ZE_Player_IKCC.gd:913 @ _grounded_move(): Parameter "body" is null.`)
		- this happens when the level changes and the ground/wall body is removed from the world
		- it doesn't appear to cause any problems for gameplay, since it happens during the loading screen
		- it could happen during the game if the player was standing on a surface when it was removed by some script or action node

```
	  "E 0:00:39:998   ZE_Player_IKCC.gd:913 @ _grounded_move(): Parameter "body" is null.
  <C++ Source>  modules/godot_physics_3d/godot_physics_server_3d.cpp:591 @ body_get_collision_layer()
  <Stack Trace> ZE_Player_IKCC.gd:913 @ _grounded_move()
                ZE_Player_IKCC.gd:676 @ ikcc_move_and_slide()
                ZS_Player.gd:124 @ process()
                system.gd:355 @ _run_process()
                system.gd:219 @ _handle()
                world.gd:219 @ process()
                ecs.gd:68 @ process()
                ZN_World.gd:90 @ _process()
)
```


### Next Up

- clean up freeze modes and handling
	- I should only enable/disable freeze in the code, the freeze mode should be selected in the editor
	- make sure this is consistently applied when you pick up, equip, unequip, and drop items
	- test it by equipping and then dropping an item, make sure it has physics again
	- the shotgun is colliding with things again
- zombies are still roaring after they are dead
- fish can swim up on land and even onto the bridge
- turning the post-shader off from the main menu does not take effect until you restart the game (or maybe if you load a level)
- your shader resolution selection is not re-selected in the options menu