### Summary

I converted weapons to use the equipment slots system. This makes them more like other equipment items and allows weapons to be hidden by attaching them to hidden markers. The visible weapon is attached to a marker node in the character's scene, which can be scripted or animated.

I converted the flashlight into an equipment item. The player no longer starts with a flashlight - they need to find one in the world. I added flashlights to the bus stop and spooky church levels.

I added a volume slider for the menu audio that includes the background loop and click effects.

I added improvements to the bus stop level (rave shotgun with rave ammo, traffic cone hat) and the fishing pier level (seagulls flying around with occasional sounds, fishing hat).

I fixed the killed by label in the game over menu to show the interactive name of the entity that killed you rather than the node name.

I spent some time debugging fish physics. They were not getting a move target as static bodies and flying away to infinity as rigid bodies. After turning the target flag back on, they were getting an immediate target position of (0, 0, 0) because duplicating component resources fires the setter despite using the default value. I worked around this by using a method to set the position+flag instead of the variable setter.

### Progress

- new features:
	- converted weapons to use the equipment slots system
		- this makes them more like other equipment items
		- the visible weapon will be attached to a marker node in the character's scene
		- weapons can be hidden by attaching them to hidden markers
		- marker visibility can even be scripted or animated, along with the position
		- markers can be set up as path followers and the path scripted, if you want
		- allows you to hold items in your hand that are not melee weapons
	- converted the flashlight into an equipment item
		- the player no longer starts with a flashlight
		- added a flashlight equipment slot to the player
		- added flashlights on the ground in the bus stop and spooky church levels
	- added a volume slider for the menu audio
		- includes the background loop and click effects
		- turn this down if you don't like the menu sounds
- level improvements:
	- improvements to the bus stop level:
		- added rave shotgun with rave ammo
		- added a traffic cone hat
	- improvements to the fishing pier level:
		- added seagulls flying around the sky, with sounds
		- added a fishing hat
- bug fixes:
	- fixed the killed by label in the game over menu
		- now shows the interactive name of the entity that killed you rather than the node name
- misc:
	- moved static entities from props to statics folder
	- added shortcuts from the main menu to the controls and the other options

### Fish Physics

I tried to add some behavior to the fish in the fishing pier level, but ran into some physics problems.

- giving the fish some behavior breaks them
	- they are not getting a move target as static bodies
	- they are flying away to infinity as rigid bodies
- they are not getting a move target because that flag had been disabled
	- pretty sure I did this to prevent the hotel clerk from moving into the other room
- after turning the flag back on, the fish are immediately getting a target position of (0, 0, 0) after they load
	- when the ECS world adds a new entity, it duplicates the component resources to create real components, which fires the setter despite still using the default value
- I can work around this by setting the flag manually or using a method to set the position+flag, instead of trying to do it through the variable's setter
	- done
- two more bugs:
	- they are still not facing the right direction while moving
		- the look and move code are separate right now, but that could be added to the move helper
			- what about predators that want to face a target while strafing?
		- I think this is impacting the zombies too, at least when wandering
	- they are clipping through the ground
		- probably because they are static bodies being moved by a tween
		- need to try converting them back to rigid bodies again

### TODOs

- [x] update inventory menu to show equip/unequip/use buttons
	- [x] use
	- [x] equip
	- [x] unequip
	- [x] drop
	- [x] if they valid for the selected item(s)
- [x] find a metal crate mesh that is less scifi
- [x] make the wood crate material less shiny
- [x] add a fish that runs away from everything
	- [x] add an animal entity type
	- [x] add a flee state
	- [x] make their physics not freak out
- [x] add other missing entity types
	- [x] clothing (wearable, not armor)
	- [x] equipment (equippable, not clothing or armor or weapons, like the flashlight)
- [ ] get rid of the character's current_armor and current_weapon references
	- [x] current_armor
	- [ ] current_weapon
		- many times more references than current_armor
		- may be useful caching
- [x] remove references to zombies in the behavior states

### Next Up

- [x] extract interaction switchboard code from player service into helper
	- this will be hard, it relies on a lot of smaller use_X handlers, many of which call into the menus to push action text
- [ ] add a death cause to the damage action, like "you have been eaten by a shark"
- [x] bug: picking up the sparkle crown does not add it to your inventory menu
- [x] implement and test unequip function
- [ ] add main menu art
- [ ] devlogs into github
- [ ] itch page
- [x] add a global group for spawn markers
- [ ] test killstreak service
	- [ ] build a level with plenty of zombies for aim and performance testing
		- [ ] "the rafters"
		- [ ] you are in the roof of a large building with zombies on the floor
		- [ ] unlimited zombies spawn from the doors
		- [ ] there is unlimited ammo
		- [ ] either you cannot fall or there are stairs to get back up that the zombies cannot negotiate
