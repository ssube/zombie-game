### Summary

I added more sounds today, including pickup sounds for items and equip sounds for weapons. I also improved the doors with textures, marker-based open/close animations, and auto-close timers.

I split up the door and lock components, so things other than doors can be locked and not all doors need to be lockable. I also figured out how to handle prefab entities with level-specific component lists - entities now have an extra components field for per-instance customization.

### Progress

- adding more sounds
	- fixed subtitles for weapon effect sounds
	- added pickup sounds for all of the items that currently exist (armor, key, medkit)
	- added equip sounds for both of the weapons (bat and shotgun)
	- reduced the volume of the bullet impact sound to make the gunfire more audible
- placed a copy of the dialogue balloon into the menu scene
	- this is not the copy that dialogue uses yet, because the dialogue manager instantiates a new scene every time
	- some minor modifications were needed to prevent the balloon from capturing all input
- adding more models
	- switched the armor placeholder box for a toolbox
- improving doors
	- added a wood texture to the door
	- switched open/close to use markers
	- implemented auto-close on timer
	- added export properties for auto-open area (proximity open)
- fixed character rotation
	- characters will now rotate towards their look target using the shortest direction (always <= 180)
- added actions to holster and reload weapon
	- implemented holster action in player system
	- reload is still TBD, depends on ammo counting (and ammo existing in the first place)
- split up door and lock components
	- not all doors are locked and things other than doors can be locked
	- locked component still has a flag for now
- improved the graphics for the objective/portal placeholder
	- added a translucent outer layer with billboard + normal map
- figured out a way to split up entity prefab and level-specific component lists
	- entities have an extra components field which is appended to their component resources before the ECS world instantiates the components
	- this solves the problem where doors would have components like locked/portal/objective added in the level and it would break the door's own components or prevent them from being modified by the prefab

### TODOs

- asset license files in each subdirectory to avoid forgetting where they came from and to help others install the same assets
- water puts out fire
- breaking glass makes noise
- limited lockpicks and more doors with good loot than there are lockpicks

### Doors

Doors have a lot of moving parts and need to work with animations, objectives, and locking, so they have been a tricky problem to solve.

Because the doors are the root of their scene, setting their local position/rotation does not work correctly with doors that have been moved or rotated. Using global coordinates is even worse, because the markers are part of the door scene, they are moving when the door animates, making their position/rotation unpredictable after each movement.

Because the markers are part of the scene, there will need to be a clockwise and counter-clockwise copy of doors that need to rotate in the same direction (like double doors at the front of the hotel). This is easier to manage if the door entity is a child and two scenes can be created using the same door, with different markers.

*Update 1*: this is not really a problem, because 3D nodes are recursively checked for entities, so the door does not need to be the root of its own scene. The door can have a 3D parent and be siblings with the markers, which prevents them from moving.

*Update 2*: However, making the door a child of the scene prevents the level from adding components to it, such as an objective. One option would be to add additional components to the scene root and copy them to the door when it is being added to the ECS world, but I'm not sure how reliable that would be or what limitations it might cause. It also breaks the objective open-door action, but it helps clean up the weird reset needed to resync door components when the entity scene is changed, but the level scene has added additional components. The most obvious solution is to split up the door rotation component and the door locked component. Since chests and other containers can be locked as well, that might be helpful for other entities as well.

Most of the exported vars in the door component are linked to movement, and most of the edited vars in the door component are linked to locking/unlocking or making the door an objective. If the objective action could search part of the scene tree for doors, it would be able to unlock more than one and would more closely match the behavior when doors are added to the world, but it would not be able to select door nodes only.

Splitting up the door and locked components seems easy enough. Not all doors can be locked, and things other than doors can also be locked, QED.

### Extra Components and Component Copy

There has been a recurring problem where prefabs are an entity with some standard components, but when they are placed into the level, additional components are needed to add extra properties onto specific instances - like locked doors, doors that are portals, and items that can be objectives. Editing the prefab components in the editor makes them unique and changes to the prefab scene will no longer take effect, until the changes are cleared and recreated. That had to happen every time the prefab components are updated.

To fix this, I've added an extra components field onto the ZE_Base entity, which is appended to the editor components (component_resources, in the GECS code) before the entity is added to the ECS world. Because they are appended before the components are created, each entity gets its own copy and they look like normal components to the ECS system. They can replace existing components of the same type or add new components to the entity.

For scenes where the entity is not the root of the scene, there is also a CopyComponents script that can be attached to any old Node. When the node is created, it will copy a list of components into the specified entities, appending them to the list of component resources in the same way as the extra components. In addition, the copy script takes a list of entities, so it can apply the same components to a group of entities in a prefab (locking both doors in a pair, f.ex).

In all, this provides three different ways to attach components to an entity:

1. the standard editor components, or component resources
2. the extra editor components, or level components
3. a parent node with the copy components script

These are applied in order, so components of the same type in 1 will be replaced by those in 2, and components in 2 will be replaced by those in 3.

### One Line Description

Quake 3 style zombie shooter in a small town, open source code with paid assets.
