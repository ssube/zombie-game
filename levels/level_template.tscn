[gd_scene load_steps=15 format=3 uid="uid://dgebxveqbxdug"]

[ext_resource type="Script" uid="uid://bg4w2cfxcm0m7" path="res://scripts/nodes/triggers/ZN_TriggerArea3D.gd" id="1_vbjsb"]
[ext_resource type="Script" uid="uid://dmonxsvpyoytj" path="res://scripts/nodes/actions/ZN_ScreenEffectAction.gd" id="2_btyjy"]
[ext_resource type="Script" uid="uid://ewo3m4f384i0" path="res://scripts/components/effects/ZC_Screen_Effect.gd" id="3_k3t4v"]
[ext_resource type="Script" uid="uid://cwu5cf7a0awcd" path="res://addons/func_godot/src/map/func_godot_map.gd" id="31_adkdk"]
[ext_resource type="Resource" uid="uid://dkql5djyx2s23" path="res://levels/std_map_settings.tres" id="32_1s4wo"]
[ext_resource type="Script" uid="uid://b560n5psxwkuk" path="res://scripts/nodes/objectives/ZN_FlagObjective.gd" id="37_3d415"]

[sub_resource type="SphereShape3D" id="SphereShape3D_ukt1r"]
radius = 1.5

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1wgrf"]
transparency = 1
albedo_color = Color(1, 0.57, 0.57, 0.2509804)
disable_receive_shadows = true

[sub_resource type="Curve" id="Curve_jawnq"]
_data = [Vector2(0, 0.50360227), 0.0, 0.0, 0, 0, Vector2(0.2526316, 1), 0.0, 0.0, 0, 0, Vector2(0.5017544, 0), 0.0, 0.0, 0, 0, Vector2(0.75438595, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.50360227), 0.0, 0.0, 0, 0]
point_count = 5

[sub_resource type="Resource" id="Resource_r7enh"]
script = ExtResource("3_k3t4v")
effect = 4
duration = 15.0
strength = 0.5
strength_curve = SubResource("Curve_jawnq")
metadata/_custom_type_script = "uid://ewo3m4f384i0"

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_yi3jx"]
sky_top_color = Color(0.35032377, 0.43960616, 0.67056155, 1)
sky_horizon_color = Color(0.6, 0.6784314, 0.6313726, 1)
ground_horizon_color = Color(0.6, 0.6784314, 0.6313726, 1)
ground_curve = 0.05

[sub_resource type="Sky" id="Sky_b6wpd"]
sky_material = SubResource("ProceduralSkyMaterial_yi3jx")

[sub_resource type="Environment" id="Environment_foxie"]
background_mode = 2
sky = SubResource("Sky_b6wpd")
ambient_light_source = 3

[sub_resource type="NavigationMesh" id="NavigationMesh_iss0w"]
vertices = PackedVector3Array(-0.25, 0.5, -5.5, 0.5, 0.5, -5.5, 0.5, 0.5, -7.25, -0.5, 0.5, -7.5, 3.5, 0.5, -11.5, 3.5, 0.5, -14.25, -3.25, 0.5, -14.25, -3.25, 0.5, -7.5, 3.5, 0.5, -10.25, 5.5, 0.5, -10.5, 5.5, 0.5, -11.25, 3.5, 0.5, -7.5, 7.25, 0.5, -11.25, 7.75, 0.5, -10.25, 13, 0.5, -7.5, 13, 0.5, -14.25, 7.75, 0.5, -11.75, 7.75, 0.5, -7.5, 7.75, 0.5, -14.25, -0.25, 0.5, -3.75, 0.5, 0.5, -3.5, -0.75, 0.5, -3.25, 3.5, 0.5, 0.75, 3.5, 0.5, -0.5, 3.5, 0.5, -3.25, 5.75, 0.5, 0.5, 5.75, 0.5, -0.25, -3.25, 0.5, -3.25, -3.25, 0.5, 3.5, 3.5, 0.5, 3.5, 7.25, 0.5, -0.25, 7.75, 0.5, 0.75, 7.75, 0.5, 11.5, 19.5, 0.5, 11.5, 19.5, 0.5, -3.25, 7.75, 0.5, -0.75, 7.75, 0.5, -3.25)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 7, 4), PackedInt32Array(4, 7, 5), PackedInt32Array(5, 7, 6), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 4), PackedInt32Array(4, 8, 3), PackedInt32Array(2, 3, 11), PackedInt32Array(11, 3, 8), PackedInt32Array(10, 12, 9), PackedInt32Array(9, 12, 13), PackedInt32Array(12, 16, 13), PackedInt32Array(13, 16, 15), PackedInt32Array(13, 15, 14), PackedInt32Array(14, 17, 13), PackedInt32Array(16, 18, 15), PackedInt32Array(0, 1, 19), PackedInt32Array(19, 1, 20), PackedInt32Array(19, 20, 21), PackedInt32Array(21, 20, 23), PackedInt32Array(21, 23, 22), PackedInt32Array(20, 24, 23), PackedInt32Array(25, 22, 26), PackedInt32Array(26, 22, 23), PackedInt32Array(21, 22, 27), PackedInt32Array(27, 22, 29), PackedInt32Array(27, 29, 28), PackedInt32Array(26, 30, 25), PackedInt32Array(25, 30, 31), PackedInt32Array(32, 31, 33), PackedInt32Array(33, 31, 34), PackedInt32Array(30, 35, 31), PackedInt32Array(31, 35, 34), PackedInt32Array(35, 36, 34)]
geometry_source_geometry_mode = 1
geometry_source_group_name = &"level"
region_merge_size = 5.0
filter_ledge_spans = true

[node name="LevelTemplate" type="Node3D"]

[node name="Areas" type="Node" parent="."]

[node name="FireArea" type="Area3D" parent="Areas"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.5, 1.5, -9.25)
collision_mask = 24
script = ExtResource("1_vbjsb")
trigger_on_exit = true
metadata/_custom_type_script = "uid://bg4w2cfxcm0m7"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Areas/FireArea"]
shape = SubResource("SphereShape3D_ukt1r")

[node name="CSGSphere3D" type="CSGSphere3D" parent="Areas/FireArea"]
radius = 2.0
material = SubResource("StandardMaterial3D_1wgrf")

[node name="ZN_ScreenEffectAction" type="Node" parent="Areas/FireArea"]
script = ExtResource("2_btyjy")
effect = SubResource("Resource_r7enh")
metadata/_custom_type_script = "uid://dmonxsvpyoytj"

[node name="Entities" type="Node" parent="."]
unique_name_in_owner = true

[node name="Room1" type="Node3D" parent="Entities"]

[node name="Room2" type="Node3D" parent="Entities"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13, 0, 4)

[node name="Room3" type="Node3D" parent="Entities"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -11)

[node name="Room4" type="Node3D" parent="Entities"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 0, -11)

[node name="Lights" type="Node" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Lights"]
environment = SubResource("Environment_foxie")

[node name="Markers" type="Node" parent="."]

[node name="Start" type="Marker3D" parent="Markers"]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 0, 1.035326, 0)

[node name="Map" type="Node3D" parent="."]
script = ExtResource("31_adkdk")
local_map_file = "uid://cwpseuysjhddd"
map_settings = ExtResource("32_1s4wo")
metadata/_custom_type_script = "uid://cwu5cf7a0awcd"

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_iss0w")

[node name="Objectives" type="Node" parent="."]

[node name="FirstObjective" type="Node" parent="Objectives"]
script = ExtResource("37_3d415")
active = true
key = "find_key"
title = "Find the oddly cone-shaped key"
metadata/_custom_type_script = "uid://b560n5psxwkuk"
