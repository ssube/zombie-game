[gd_scene load_steps=26 format=3 uid="uid://drdesj6rooo11"]

[ext_resource type="Script" uid="uid://svxqn3t4whnt" path="res://scripts/entities/props/ZE_Button.gd" id="1_l113m"]
[ext_resource type="Script" uid="uid://b6k13gc2m4e5s" path="res://addons/gecs/ecs/component.gd" id="2_txy2n"]
[ext_resource type="Script" uid="uid://c8jci3yicdcmm" path="res://scripts/components/props/ZC_Button.gd" id="3_klvmx"]
[ext_resource type="Script" uid="uid://0dld8iow0suh" path="res://scripts/components/status/ZC_Interactive.gd" id="4_c6nwv"]
[ext_resource type="Material" uid="uid://bvab0lnhkpasr" path="res://materials/effects/shimmer_world.tres" id="5_b5ffr"]
[ext_resource type="Script" uid="uid://barikupijl7r7" path="res://scripts/components/ZC_Action.gd" id="6_b5ffr"]
[ext_resource type="Script" uid="uid://djt2jgsv2ihkt" path="res://scripts/nodes/actions/ZN_AnimationAction.gd" id="6_wlayu"]
[ext_resource type="Script" uid="uid://b8oatb3tdywrh" path="res://scripts/components/characters/ZC_Skin.gd" id="7_b41lu"]
[ext_resource type="Script" uid="uid://dga8v5ocxqirt" path="res://scripts/nodes/actions/ZN_AudioAction.gd" id="7_c6nwv"]
[ext_resource type="Material" uid="uid://divxfmiycw33x" path="res://materials/button_green_disabled.tres" id="7_iasvb"]
[ext_resource type="Material" uid="uid://c4ihe7nrnnjeg" path="res://materials/button_green_enabled.tres" id="7_ysgk6"]
[ext_resource type="Script" uid="uid://mcuf24u8q14t" path="res://scripts/nodes/ZN_AudioSubtitle3D.gd" id="9_wlayu"]
[ext_resource type="AudioStream" uid="uid://bwlk2khji1e0a" path="res://sounds/1000 Retro Sound Effects/General Sounds/Buttons/sfx_sounds_button3.ogg" id="10_iasvb"]
[ext_resource type="Script" uid="uid://be84y2dw7fp0e" path="res://scripts/components/effects/ZC_Shimmer.gd" id="10_qf5gr"]
[ext_resource type="Script" uid="uid://w4f2ylmprmmj" path="res://scripts/nodes/actions/ZN_SkinAction.gd" id="11_wlayu"]

[sub_resource type="Resource" id="Resource_0h2if"]
script = ExtResource("3_klvmx")
reset_delay = 1.0
metadata/_custom_type_script = "uid://c8jci3yicdcmm"

[sub_resource type="Resource" id="Resource_qcbqw"]
script = ExtResource("4_c6nwv")
name = "Green Button"
pickup = false
crosshair_color = Color(1, 0.92941177, 0, 1)
metadata/_custom_type_script = "uid://0dld8iow0suh"

[sub_resource type="Resource" id="Resource_wlayu"]
script = ExtResource("6_b5ffr")
actions = Dictionary[int, NodePath]({
20: NodePath("PressedActions"),
21: NodePath("ReleasedActions")
})
metadata/_custom_type_script = "uid://barikupijl7r7"

[sub_resource type="Resource" id="Resource_ysgk6"]
script = ExtResource("7_b41lu")
material_disabled = ExtResource("7_iasvb")
material_enabled = ExtResource("7_ysgk6")
skin_shapes = Array[NodePath]([NodePath("CSGBox3D")])
current_skin = 3
metadata/_custom_type_script = "uid://b8oatb3tdywrh"

[sub_resource type="Resource" id="Resource_ypjb3"]
script = ExtResource("10_qf5gr")
material = ExtResource("5_b5ffr")
nodes = Array[NodePath]([NodePath("CSGBox3D")])
metadata/_custom_type_script = "uid://be84y2dw7fp0e"

[sub_resource type="BoxShape3D" id="BoxShape3D_0h2if"]
size = Vector3(0.3, 0.3, 0.3)

[sub_resource type="Animation" id="Animation_2yqqr"]
length = 0.001
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CSGBox3D")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, 0)

[sub_resource type="Animation" id="Animation_2syx8"]
resource_name = "pressed"
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CSGBox3D")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0.1, 1, 0, 0, 0, 0.5, 1, 0, -0.5, 0)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CollisionShape3D")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0.1, 1, 0, 0, 0, 0.5, 1, 0, -0.5, 0)

[sub_resource type="Animation" id="Animation_hdbxb"]
resource_name = "released"
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CSGBox3D")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0.1, 1, 0, -0.5, 0, 0.5, 1, 0, 0, 0)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CollisionShape3D")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0.1, 1, 0, -0.5, 0, 0.5, 1, 0, 0, 0)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_hdbxb"]
_data = {
&"RESET": SubResource("Animation_2yqqr"),
&"pressed": SubResource("Animation_2syx8"),
&"released": SubResource("Animation_hdbxb")
}

[node name="PushButton" type="StaticBody3D"]
collision_layer = 4
collision_mask = 31
script = ExtResource("1_l113m")
prefab_path = "res://entities/props/button_push.tscn"
component_resources = Array[ExtResource("2_txy2n")]([SubResource("Resource_0h2if"), SubResource("Resource_qcbqw"), SubResource("Resource_wlayu"), SubResource("Resource_ysgk6"), SubResource("Resource_ypjb3")])

[node name="CSGBox3D" type="CSGBox3D" parent="."]
size = Vector3(0.3, 0.3, 0.3)
material = ExtResource("7_ysgk6")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("BoxShape3D_0h2if")

[node name="ZN_AudioSubtitle3D" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("10_iasvb")
volume_db = -24.0
script = ExtResource("9_wlayu")
subtitle_text = "Button Pressed"
metadata/_custom_type_script = "uid://mcuf24u8q14t"

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_hdbxb")
}

[node name="PressedActions" type="Node" parent="."]

[node name="ZN_AnimationAction" type="Node" parent="PressedActions" node_paths=PackedStringArray("animation_player")]
script = ExtResource("6_wlayu")
animation_player = NodePath("../../AnimationPlayer")
event_animations = Dictionary[int, String]({
20: "pressed"
})

[node name="ZN_AudioAction" type="Node" parent="PressedActions" node_paths=PackedStringArray("audio_players")]
script = ExtResource("7_c6nwv")
audio_players = [NodePath("../../ZN_AudioSubtitle3D")]

[node name="ZN_SkinAction" type="Node" parent="PressedActions" node_paths=PackedStringArray("target_entity")]
script = ExtResource("11_wlayu")
target_entity = NodePath("../..")
new_skin = 4

[node name="ReleasedActions" type="Node" parent="."]

[node name="ZN_AnimationAction" type="Node" parent="ReleasedActions" node_paths=PackedStringArray("animation_player")]
script = ExtResource("6_wlayu")
animation_player = NodePath("../../AnimationPlayer")
event_animations = Dictionary[int, String]({
21: "released"
})

[node name="ZN_SkinAction" type="Node" parent="ReleasedActions" node_paths=PackedStringArray("target_entity")]
script = ExtResource("11_wlayu")
target_entity = NodePath("../..")
new_skin = 3
