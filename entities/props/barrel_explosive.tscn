[gd_scene load_steps=23 format=3 uid="uid://cq0idhwb5f2oq"]

[ext_resource type="Script" uid="uid://dhsuals8autq1" path="res://scripts/entities/props/ZE_Barrel.gd" id="1_o8a62"]
[ext_resource type="Script" uid="uid://b6k13gc2m4e5s" path="res://addons/gecs/ecs/component.gd" id="2_wrl38"]
[ext_resource type="Script" uid="uid://jokkv7skgimj" path="res://scripts/components/status/ZC_Flammable.gd" id="3_dwmog"]
[ext_resource type="PackedScene" uid="uid://dqfrsv8nlncwj" path="res://effects/props/barrel_explosion.tscn" id="3_wrl38"]
[ext_resource type="Script" uid="uid://0ndifcnh0nsp" path="res://scripts/components/ZC_Health.gd" id="4_vlq2d"]
[ext_resource type="PackedScene" uid="uid://b13thfox1hd38" path="res://effects/fire_effect.tscn" id="6_dwmog"]
[ext_resource type="Script" uid="uid://0dld8iow0suh" path="res://scripts/components/status/ZC_Interactive.gd" id="6_k4gqj"]
[ext_resource type="Material" uid="uid://d4bmgb0pkgmpm" path="res://materials/effects/shimmer_danger.tres" id="7_bv25f"]
[ext_resource type="Script" uid="uid://be84y2dw7fp0e" path="res://scripts/components/effects/ZC_Shimmer.gd" id="8_n4v3m"]
[ext_resource type="Script" uid="uid://barikupijl7r7" path="res://scripts/components/ZC_Action.gd" id="9_mtpvy"]
[ext_resource type="ArrayMesh" uid="uid://dnn3nnc05inha" path="res://entities/props/barrel_red.mesh" id="9_n4v3m"]
[ext_resource type="Script" uid="uid://b8j7no147cfb4" path="res://scripts/nodes/actions/ZN_ChangeActorAction.gd" id="11_mtpvy"]
[ext_resource type="Script" uid="uid://dbj456ofx8mw1" path="res://scripts/nodes/actions/ZN_BranchAction.gd" id="11_rox5l"]
[ext_resource type="Script" uid="uid://do7trwtn8xc7t" path="res://scripts/nodes/actions/ZN_FireAction.gd" id="12_r7jr2"]
[ext_resource type="Script" uid="uid://c1xgtwmj2vomk" path="res://scripts/nodes/actions/ZN_SpawnAction.gd" id="13_w3336"]
[ext_resource type="Script" uid="uid://dlpeis5tgmelp" path="res://scripts/nodes/actions/ZN_EntityAction.gd" id="14_w3336"]

[sub_resource type="Resource" id="Resource_kpq4c"]
script = ExtResource("3_dwmog")
effect_path = NodePath("Effects/FireEffect")
metadata/_custom_type_script = "uid://jokkv7skgimj"

[sub_resource type="Resource" id="Resource_506tl"]
script = ExtResource("4_vlq2d")
max_health = 50
current_health = 50
metadata/_custom_type_script = "uid://0ndifcnh0nsp"

[sub_resource type="Resource" id="Resource_0kgpt"]
script = ExtResource("6_k4gqj")
name = "Explosive Barrel"
pickup = false
crosshair_color = Color(0.9372549, 0.30980393, 0.52156866, 1)
metadata/_custom_type_script = "uid://0dld8iow0suh"

[sub_resource type="Resource" id="Resource_20vof"]
script = ExtResource("9_mtpvy")
actions = Dictionary[int, NodePath]({
33: NodePath("DeathBranch"),
35: NodePath("DamageBranch")
})
metadata/_custom_type_script = "uid://barikupijl7r7"

[sub_resource type="Resource" id="Resource_fgxaa"]
script = ExtResource("8_n4v3m")
material = ExtResource("7_bv25f")
nodes = Array[NodePath]([NodePath("Barrel/Barrel")])
metadata/_custom_type_script = "uid://be84y2dw7fp0e"

[sub_resource type="CylinderShape3D" id="CylinderShape3D_bv25f"]
height = 1.2
radius = 0.45

[node name="Barrel" type="RigidBody3D"]
collision_layer = 2
collision_mask = 31
mass = 100.0
script = ExtResource("1_o8a62")
prefab_path = "res://entities/props/barrel.tscn"
component_resources = Array[ExtResource("2_wrl38")]([SubResource("Resource_kpq4c"), SubResource("Resource_506tl"), SubResource("Resource_0kgpt"), SubResource("Resource_20vof"), SubResource("Resource_fgxaa")])

[node name="Barrel" type="Node3D" parent="."]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)

[node name="Barrel" type="MeshInstance3D" parent="Barrel"]
transform = Transform3D(65, 0, 0, 0, -2.8412403e-06, 65, 0, -65, -2.8412403e-06, 0, 0, 0)
mesh = ExtResource("9_n4v3m")
skeleton = NodePath("")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CylinderShape3D_bv25f")
metadata/surface_type = &"metal"

[node name="Effects" type="Node3D" parent="."]

[node name="FireEffect" parent="Effects" instance=ExtResource("6_dwmog")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0.16060305, 0)
visible = false

[node name="DamageBranch" type="Node" parent="."]
script = ExtResource("11_rox5l")
metadata/_custom_type_script = "uid://dbj456ofx8mw1"

[node name="SetBarrelAsActor" type="Node" parent="DamageBranch" node_paths=PackedStringArray("set_actor")]
script = ExtResource("11_mtpvy")
set_actor = NodePath("../..")

[node name="IgniteBarrel" type="Node" parent="DamageBranch/SetBarrelAsActor"]
script = ExtResource("12_r7jr2")
metadata/_custom_type_script = "uid://do7trwtn8xc7t"

[node name="DeathBranch" type="Node" parent="."]
script = ExtResource("11_rox5l")
metadata/_custom_type_script = "uid://dbj456ofx8mw1"

[node name="SpawnExplosion" type="Node" parent="DeathBranch"]
script = ExtResource("13_w3336")
spawn_mode = 0
spawn_scenes = Array[PackedScene]([ExtResource("3_wrl38")])
metadata/_custom_type_script = "uid://c1xgtwmj2vomk"

[node name="RemoveBarrel" type="Node" parent="DeathBranch" node_paths=PackedStringArray("entity")]
script = ExtResource("14_w3336")
entity = NodePath("../..")
remove = true
metadata/_custom_type_script = "uid://dlpeis5tgmelp"
