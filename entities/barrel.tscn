[gd_scene load_steps=12 format=3 uid="uid://cq0idhwb5f2oq"]

[ext_resource type="Script" uid="uid://dhsuals8autq1" path="res://scripts/ZE_Barrel.gd" id="1_o8a62"]
[ext_resource type="Script" uid="uid://b6k13gc2m4e5s" path="res://addons/gecs/ecs/component.gd" id="2_wrl38"]
[ext_resource type="Script" uid="uid://jokkv7skgimj" path="res://scripts/ZC_Flammable.gd" id="3_dwmog"]
[ext_resource type="PackedScene" uid="uid://dqfrsv8nlncwj" path="res://effects/barrel_explosion.tscn" id="3_wrl38"]
[ext_resource type="Script" uid="uid://0ndifcnh0nsp" path="res://scripts/ZC_Health.gd" id="4_vlq2d"]

[sub_resource type="Resource" id="Resource_kpq4c"]
script = ExtResource("3_dwmog")
ignite_on_hit = true
explode_on_death = true
effect_path = NodePath("Effects/FireEffect")
explosion_scene = ExtResource("3_wrl38")
metadata/_custom_type_script = "uid://jokkv7skgimj"

[sub_resource type="Resource" id="Resource_506tl"]
script = ExtResource("4_vlq2d")
max_health = 50
current_health = 50
metadata/_custom_type_script = "uid://0ndifcnh0nsp"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_s4e23"]
albedo_color = Color(1, 0.24000001, 0.24000001, 1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_fn03q"]
height = 1.0
radius = 0.4

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_o8a62"]
transparency = 1
albedo_color = Color(1, 0.20999998, 0.20999998, 0.5294118)
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="QuadMesh" id="QuadMesh_wrl38"]
material = SubResource("StandardMaterial3D_o8a62")
size = Vector2(0.5, 0.5)

[node name="Barrel" type="RigidBody3D"]
script = ExtResource("1_o8a62")
component_resources = Array[ExtResource("2_wrl38")]([SubResource("Resource_kpq4c"), SubResource("Resource_506tl")])

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="."]
radius = 0.4
height = 1.0
sides = 6
material = SubResource("StandardMaterial3D_s4e23")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CylinderShape3D_fn03q")

[node name="Effects" type="Node3D" parent="."]

[node name="FireEffect" type="Node3D" parent="Effects"]
visible = false

[node name="CPUParticles3D" type="CPUParticles3D" parent="Effects/FireEffect"]
mesh = SubResource("QuadMesh_wrl38")
emission_shape = 1
emission_sphere_radius = 0.8
gravity = Vector3(0, 1.5, 0)
color = Color(1, 0.16000003, 0.16000003, 1)
